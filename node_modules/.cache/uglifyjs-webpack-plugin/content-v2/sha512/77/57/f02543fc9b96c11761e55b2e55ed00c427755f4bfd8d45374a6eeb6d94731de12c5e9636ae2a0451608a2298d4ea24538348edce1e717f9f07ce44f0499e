{"map":"{\"version\":3,\"sources\":[\"/Users/zr/work/niepan/node_modules/_np-loader@1.0.2@np-loader/index.js!/Users/zr/work/niepan/src/index.np\",\"/Users/zr/work/niepan/src/niepan.js\",\"/Users/zr/work/niepan/src/index.js\"],\"names\":[\"module\",\"exports\",\"global\",\"undefined\",\"niepan\",\"copyright\",\"np\",\"element\",\"arguments\",\"length\",\"prototype\",\"create\",\"version\",\"ast\",\"_index\",\"_res\",\"index\",\"res\",\"childElementCount\",\"children\",\"childNodes\",\"_iteratorNormalCompletion\",\"_didIteratorError\",\"_iteratorError\",\"_step\",\"_iterator\",\"Symbol\",\"iterator\",\"next\",\"done\",\"child\",\"value\",\"this\",\"err\",\"return\",\"push\",\"nodeName\",\"parent\",\"parentIndex\",\"nodeType\",\"append\",\"elementOrString\",\"parentNode\",\"_typeof\",\"Error\",\"appendChild\",\"innerHTML\",\"$np\",\"init\",\"$element\",\"$data\",\"$originals\",\"$listeners\",\"$watch\",\"getAttribute\",\"Object\",\"defineProperty\",\"set\",\"v\",\"bind\",\"get\",\"$status\",\"$set\",\"k\",\"$get\",\"sub\",\"event\",\"callback\",\"once\",\"system\",\"systemSymbol\",\"systemCallback\",\"evt\",\"removeEventListener\",\"pub\",\"addEventListener\",\"console\",\"log\",\"warn\",\"request\",\"o\",\"url\",\"method\",\"success\",\"xhr\",\"fail\",\"XMLHttpRequest\",\"window\",\"ActiveXObject\",\"onreadystatechange\",\"readyState\",\"status\",\"response\",\"open\",\"headers\",\"toString\",\"call\",\"forEach\",\"setRequestHeader\",\"send\",\"animate\",\"fn\",\"time\",\"obeserve\",\"MutationObserver\",\"WebKitMutationObserver\",\"MozMutationObserver\",\"mutations\",\"nodes\",\"addedNodes\",\"i\",\"node\",\"notxss\",\"blacks\",\"indexOf\",\"src\",\"removeChild\",\"e\",\"observe\",\"document\",\"subtree\",\"childList\",\"keywords\",\"withelist\",\"__WEBPACK_AMD_DEFINE_RESULT__\",\"apply\",\"content\",\"__webpack_require__\",\"li1\",\"getElementById\",\"body\",\"li3\",\"age\",\"input1\",\"name\"],\"mappings\":\"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\",\"sourcesContent\":[\"module.exports = \\\"<!DOCTYPE html>\\\\n<html lang=\\\\\\\"en\\\\\\\">\\\\n<head>\\\\n  <meta charset=\\\\\\\"UTF-8\\\\\\\">\\\\n  <meta name=\\\\\\\"viewport\\\\\\\" content=\\\\\\\"width=device-width, initial-scale=1.0\\\\\\\">\\\\n  <meta http-equiv=\\\\\\\"X-UA-Compatible\\\\\\\" content=\\\\\\\"ie=edge\\\\\\\">\\\\n  <title>niepan example</title>\\\\n</head>\\\\n<body>\\\\n  <ul id=\\\\\\\"ul\\\\\\\">\\\\n    <li id=\\\\\\\"li1\\\\\\\">1</li>\\\\n    <li id=\\\\\\\"li2\\\\\\\">2</li>\\\\n    <li id=\\\\\\\"li3\\\\\\\" watch=\\\\\\\"age\\\\\\\">3</li>\\\\n  </ul>\\\\n  <div>-------------</div>\\\\n  <input np id=\\\\\\\"input1\\\\\\\" type=\\\\\\\"text\\\\\\\" value=\\\\\\\"\\\\\\\" watch=\\\\\\\"name\\\\\\\" placeholder=\\\\\\\"place input your name\\\\\\\" />\\\\n  <div></div>\\\\n</body>\\\\n</html>\\\\n\\\"\",\"(function(global, undefined) {\\n\\n  //防止重复加载niepan.js\\n  if (global.niepan && global.niepan.copyright === '@yegao') {\\n    return;\\n  }\\n\\n  //达到np()等价于new np()的目的\\n  var np = function(element = null) {\\n    return np.prototype.create(np.prototype, element);\\n  }\\n\\n  //原型属性\\n  np.prototype = {\\n    //内部静态变量,最好不要动\\n    version: '1.0.7',\\n    copyright: '@yegao',\\n    /**\\n     * @todo 抽象语法树\\n     * @param  {[type]} element [description]\\n     * @param  {[type]} _index  [description]\\n     * @param  {[type]} _res    [description]\\n     * @return {[type]}         [description]\\n     */\\n    ast: function(element, _index, _res) {\\n      // if(Object.prototype.toString.call(element) === \\\"[object Array]\\\"){\\n      //   console.warn('the ast get multiple trees');\\n      //   return ;\\n      // }\\n      if (!element) {\\n        return;\\n      }\\n      /********************************************************************************************\\n       *     ·[3]                                                                                 *\\n       *     ·[2]            ·[2]                            ·[4]                                 *\\n       *     ·[3]            ·[3]            ·[3]            ·[2]        ·[2]        ·[0]    ·[1] *\\n       *     ·[0]·[0]·[0]    ·[0]·[0]·[0]    ·[0]·[0]·[0]    ·[0]·[0]    ·[0]·[0]            ·[0] *\\n       ********************************************************************************************/\\n      var index = _index || 0;\\n      var res = _res || [];\\n      //nodeType 1的比如img的childElementCount为0 nodeType为3的txt没有childElementCount\\n      if (element.childElementCount) {\\n        var children = element.childNodes;\\n        for (var index of children) {\\n          var child = children[index];\\n          child.index = element.index + '|' + index;\\n          return this.ast(child, res);\\n        }\\n      }\\n      res.push({\\n        nodeName: element.nodeName,\\n        childNodes: element.childNodes,\\n        parent: parentIndex || 0,\\n        nodeType: element.nodeType\\n      });\\n      return res;\\n    },\\n    /**\\n     * @todo需不需要将插入的子节点转成niepan,或者是添加一个参数来控制?\\n     * @param  {[object|string]} elementOrString [description]\\n     * @param  {[object]} parentNode      [description]\\n     * @return {[object]}                 [description]\\n     */\\n    append: function(elementOrString, parentNode) {\\n      if (!parentNode || typeof parentNode != 'object') {\\n        throw new Error('you append a element to a undefined parent node');\\n      }\\n      switch (typeof elementOrString) {\\n        case 'object':\\n          return parentNode.appendChild(elementOrString);\\n        case 'string':\\n          parentNode.innerHTML += elementOrString;\\n          return ast(elementOrString)\\n        default:\\n          throw new Error('you append a element to a undefined parent node');\\n      }\\n    },\\n    /**\\n     * 以prototype为原型创建一个对象，该对象的element属性为element\\n     * @todo 是否需要合并重复的niepan,脏检查或者直接将元素上的事件就直接放到元素上，仔细一想也没什么必要...待定\\n     * @param  {object} prototype 原型\\n     * @param  {object} element   niepan对绑定的元素\\n     * @return {object}           生成的niepan\\n     */\\n    create: function(prototype, element) {\\n      if (element) {\\n        if (element.$np) {\\n          throw new Error('this element has been a niepan');\\n        }\\n        element.$np = true;\\n      }\\n      // 实例属性都有一个$符号,和原型属性作区分\\n      var init = function() {\\n        //传参里的element的优先级最高，如果没有传element就检查有没有定义template函数\\n        this.$element = element;\\n        //当前实例绑定的变量全部放在$data中\\n        this.$data = {};\\n        //元素原本就有的事件监听类型\\n        this.$originals = [];\\n        //listeners = originals + unoriginals\\n        this.$listeners = [];\\n        //watch 实现双向绑定\\n        this.$watch = element && element.getAttribute('watch');\\n        if (this.$watch) {\\n          if (typeof this.$watch != 'string') {\\n            throw new Error('the attribute \\\"watch\\\" should be a string!');\\n          }\\n          // 发现不能重写element.__proto__.value的setter方法（native code）\\n          // console.log(Object.getOwnPropertyDescriptor(this.$element.constructor.prototype,'value').set);\\n          // Object.getOwnPropertyDescriptor(this.$element.constructor.prototype,'value').set = function(){\\n          //   console.log('xxx');\\n          // }\\n          Object.defineProperty(this.$data, this.$watch, {\\n            set: (function(v) {\\n              this.$element.value = v;\\n            }).bind(this),\\n            get: (function() {\\n              return this.$element.value;\\n            }).bind(this)\\n          })\\n        }\\n        //状态\\n        this.$status = {};\\n        this.$set = function(k, v) {\\n          this.$status[k] = v;\\n          return this.$status;\\n        };\\n        this.$get = function(k) {\\n          return this.$status[k];\\n        }\\n      };\\n      // 原型属性\\n      init.prototype = prototype;\\n      return new init;\\n    },\\n    /**\\n    * 通过sub注册的事件如果是元素自带的系统事件，既可以通过pub触发也可以通过系统方式(比如点击鼠标)触发\\n    * 通过sub注册的事件如果是自定义的事件，只能通过pub触发\\n    * @param  {[type]}   event    事件名\\n    * @param  {Function} callback 事件被触发后执行的回调方法\\n    * @param  {[type]}   once     该事件被触发一次之后是否被销毁\\n    */\\n    sub: function(event, callback, once) {\\n      // console.log(this.$element, event);\\n      if (typeof callback === 'function') {\\n        //自定义事件\\n        this.$listeners[event] = {\\n          callback: callback, //事件回调方法\\n          once: once, //是否只能被触发一次\\n          system: this.$element && ('on' + event in this.$element) && Symbol(event) //是否是元素自带的系统事件,是则返回一个Symbol\\n        }\\n        //系统事件\\n        var systemSymbol = this.$listeners[event].system;\\n        if (systemSymbol) {\\n          var systemCallback = this.$originals[systemSymbol] = (function(evt) {\\n            // console.log(this, evt);\\n            if (this.$listeners[event].once) {\\n              delete this.$originals[systemSymbol];\\n              this.$element.removeEventListener(event, systemCallback);\\n            }\\n            this.pub(event);\\n          }).bind(this);\\n          this.$element.addEventListener(event, systemCallback);\\n        }\\n      }\\n    },\\n    /**\\n     * 触发事件\\n     * @param  {string} event 事件名\\n     */\\n    pub: function(event) {\\n      if (this.$listeners[event]) {\\n        this.$listeners[event].callback();\\n        if (this.$listeners[event].once) {\\n          console.log('delete');\\n          delete this.$listeners[event];\\n        }\\n      } else {\\n        console.warn('not found event \\\\'' + event + '\\\\',maybe it has been removed');\\n      }\\n    },\\n    /**\\n     * 绑定事件,该事件只能被触发一次就会被销毁\\n     * @param  {object}   event    [description]\\n     * @param  {Function} callback [description]\\n     */\\n    once: function(event, callback) {\\n      this.sub(event, callback, true);\\n    },\\n    /**\\n     * 发送http请求\\n     * @param  {object} o [description]\\n     */\\n    request: function(o) {\\n      if (!o.url) {\\n        throw new Error('niepan.request need url!');\\n      }\\n      var url = o.url,\\n        method = o.method || 'GET',\\n        success = o.success || function() {},\\n        fail = o.fail || function() {};\\n      var xhr = null;\\n      if (global.XMLHttpRequest) {\\n        xhr = new XMLHttpRequest();\\n      } else if (window.ActiveXObject) { // for IE5 and IE6\\n        xhr = new ActiveXObject(\\\"Microsoft.XMLHTTP\\\");\\n      }\\n      if (xhr) {\\n        xhr.onreadystatechange = function() {\\n          if (xhr.readyState == 4) { // XMLHttpRequest.DONE\\n            if (xhr.status == 200) { // 200 = \\\"服务端成功处理\\\"\\n              success(xhr.response);\\n            } else {\\n              throw new Error(\\\"\\\");\\n            }\\n          }\\n        };\\n        xhr.open(method, url, true);\\n        if (o.headers && Object.prototype.toString.call(o.headers) === \\\"[object Array]\\\") {\\n          // headers = o.headers || [{\\n          //   'Content-Type': 'application/x-www-form-urlencoded'\\n          // }];\\n          headers.forEach(function(v, k) {\\n            xhr.setRequestHeader(k, v);\\n          });\\n        }\\n        xhr.send(null);\\n      } else {\\n        throw new Error(\\\"current environment does not support XMLHTTP!\\\");\\n      }\\n    },\\n    /**\\n     * 动画\\n     * @param  {Function} fn   [description]\\n     * @param  {number}   time [description]\\n     */\\n    animate: function(fn, time) {\\n      function step() {\\n        if (typeof fn === 'function') {\\n          fn();\\n        }\\n        if (global.requestAnimationFrame) {\\n          global.requestAnimationFrameraf(step);\\n        } else {\\n          setTimeout(step, time)\\n        }\\n      }\\n    },\\n    // 文件上传\\n    // file:function(resource,callback){\\n    //   if(callback){\\n    //     callback();\\n    //   }\\n    //   return {\\n    //     progress:0,\\n    //     url:''\\n    //   }\\n    // },\\n    /**\\n     * MutationObserver 的不同兼容性写法\\n     * 该构造函数用来实例化一个新的 Mutation 观察者对象\\n     * Mutation 观察者对象能监听在某个范围内的 DOM 树变化\\n     * @type {[type]}\\n     */\\n    obeserve: function() {\\n      var MutationObserver = global.MutationObserver || global.WebKitMutationObserver || global.MozMutationObserver;\\n      var observer = new MutationObserver(function(mutations) {\\n        mutations.forEach(function(v) {\\n          var nodes = v.addedNodes;\\n          for (var i = 0; i < nodes.length; i++) {\\n            var node = nodes[i];\\n            if (this.notxss.blacks.indexOf(node.src) != -1) {\\n              try {\\n                node.parentNode.removeChild(node);\\n                console.log('拦截可疑静态脚本:', node.src);\\n              } catch (e) {\\n                console.warn(e);\\n              }\\n            }\\n          }\\n        });\\n      });\\n      // 传入目标节点和观察选项\\n      // 如果 target 为 document 或者 document.documentElement\\n      // 则当前文档中所有的节点添加与删除操作都会被观察到\\n      observer.observe(document, {\\n        subtree: true,\\n        childList: true\\n      });\\n    },\\n    /**\\n     * 防止xss攻击\\n     * @type {Object}\\n     */\\n    notxss: {\\n      keywords: [], //检测的关键字符\\n      withelist: [], //白名单列表\\n      blacks: [], //黑名单列表\\n    }\\n  }\\n  // Commonjs\\n  if (typeof module === 'object' && typeof module.exports === 'object') {\\n    module.exports = np\\n  } else {\\n    throw new Error('current environment do not support niepan');\\n  }\\n  //global、amd、cmd、\\n  if (global) {\\n    global.niepan = np;\\n  } else if (typeof define === 'function') {\\n    if (define.amd) {\\n      define('niepan', [], function() {\\n        return np;\\n      })\\n    } else if (define.cmd) {\\n      define(function(require, exports, module) {\\n        module.exports = np;\\n      })\\n    }\\n  }\\n})(window || this);\\n\",\"//np-loader会\\nvar content = require('./index.np');\\nconsole.log(content);\\nconst niepan = require('./niepan.js');\\nconsole.log(niepan);\\nvar o = niepan();\\nconsole.log(o);\\n\\no.sub('xx',function(){console.log('pub...')});\\no.pub('xx');\\no.pub('xx');\\n\\no.sub('yy',function(){console.log('pub...')},true);\\no.pub('yy');\\no.pub('yy');\\n\\no.request({\\n  url:'http://localhost:8888',\\n  success:function(res){\\n    console.log(res);\\n  }\\n});\\n\\nvar li1 = niepan(document.getElementById('li1'));\\nconsole.log(li1);\\nli1.sub('click',function(){\\n  console.log('clicked li1,this event could be pubed all the time');\\n});\\n\\nvar body= niepan(document.body);\\nconsole.log(body);\\nbody.sub('click',function(){\\n  console.log('clicked body,this event would be pubed only one time');\\n},true);\\n\\nvar li3 = niepan(document.getElementById('li3'));\\nconsole.log(li3.$data.age);\\n\\nvar input1 = niepan(document.getElementById('input1'));\\ninput1.sub('input',function(evt){\\n  console.log(input1.$data.name);\\n});\\n\\n// It will throw a error when define a niepan for the same element moe than one time;\\n// var input2 = niepan(document.getElementById('input1'));//ERROR\\n\"]}","code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{\"+Kph\":function(e,t){e.exports='<!DOCTYPE html>\\n<html lang=\"en\">\\n<head>\\n  <meta charset=\"UTF-8\">\\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n  <meta http-equiv=\"X-UA-Compatible\" content=\"ie=edge\">\\n  <title>niepan example</title>\\n</head>\\n<body>\\n  <ul id=\"ul\">\\n    <li id=\"li1\">1</li>\\n    <li id=\"li2\">2</li>\\n    <li id=\"li3\" watch=\"age\">3</li>\\n  </ul>\\n  <div>-------------</div>\\n  <input np id=\"input1\" type=\"text\" value=\"\" watch=\"name\" placeholder=\"place input your name\" />\\n  <div></div>\\n</body>\\n</html>\\n'},B2MJ:function(e,t,n){\"use strict\";(function(e){var n,o=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};!function(i,r){if(!i.niepan||\"@yegao\"!==i.niepan.copyright){var s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e.prototype.create(e.prototype,t)};if(s.prototype={version:\"1.0.7\",copyright:\"@yegao\",ast:function(e,t,n){if(e){var o=t||0,i=n||[];if(e.childElementCount){var r=e.childNodes,s=!0,l=!1,a=void 0;try{for(var c,u=r[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){var d=r[o=c.value];return d.index=e.index+\"|\"+o,this.ast(d,i)}}catch(e){l=!0,a=e}finally{try{!s&&u.return&&u.return()}finally{if(l)throw a}}}return i.push({nodeName:e.nodeName,childNodes:e.childNodes,parent:parentIndex||0,nodeType:e.nodeType}),i}},append:function(e,t){if(!t||\"object\"!=(void 0===t?\"undefined\":o(t)))throw new Error(\"you append a element to a undefined parent node\");switch(void 0===e?\"undefined\":o(e)){case\"object\":return t.appendChild(e);case\"string\":return t.innerHTML+=e,ast(e);default:throw new Error(\"you append a element to a undefined parent node\")}},create:function(e,t){if(t){if(t.$np)throw new Error(\"this element has been a niepan\");t.$np=!0}var n=function(){if(this.$element=t,this.$data={},this.$originals=[],this.$listeners=[],this.$watch=t&&t.getAttribute(\"watch\"),this.$watch){if(\"string\"!=typeof this.$watch)throw new Error('the attribute \"watch\" should be a string!');Object.defineProperty(this.$data,this.$watch,{set:function(e){this.$element.value=e}.bind(this),get:function(){return this.$element.value}.bind(this)})}this.$status={},this.$set=function(e,t){return this.$status[e]=t,this.$status},this.$get=function(e){return this.$status[e]}};return n.prototype=e,new n},sub:function(e,t,n){if(\"function\"==typeof t){this.$listeners[e]={callback:t,once:n,system:this.$element&&\"on\"+e in this.$element&&Symbol(e)};var o=this.$listeners[e].system;if(o){var i=this.$originals[o]=function(t){this.$listeners[e].once&&(delete this.$originals[o],this.$element.removeEventListener(e,i)),this.pub(e)}.bind(this);this.$element.addEventListener(e,i)}}},pub:function(e){this.$listeners[e]?(this.$listeners[e].callback(),this.$listeners[e].once&&(console.log(\"delete\"),delete this.$listeners[e])):console.warn(\"not found event '\"+e+\"',maybe it has been removed\")},once:function(e,t){this.sub(e,t,!0)},request:function(e){if(!e.url)throw new Error(\"niepan.request need url!\");var t=e.url,n=e.method||\"GET\",o=e.success||function(){},r=(e.fail,null);if(i.XMLHttpRequest?r=new XMLHttpRequest:window.ActiveXObject&&(r=new ActiveXObject(\"Microsoft.XMLHTTP\")),!r)throw new Error(\"current environment does not support XMLHTTP!\");r.onreadystatechange=function(){if(4==r.readyState){if(200!=r.status)throw new Error(\"\");o(r.response)}},r.open(n,t,!0),e.headers&&\"[object Array]\"===Object.prototype.toString.call(e.headers)&&headers.forEach(function(e,t){r.setRequestHeader(t,e)}),r.send(null)},animate:function(e,t){},obeserve:function(){new(i.MutationObserver||i.WebKitMutationObserver||i.MozMutationObserver)(function(e){e.forEach(function(e){for(var t=e.addedNodes,n=0;n<t.length;n++){var o=t[n];if(-1!=this.notxss.blacks.indexOf(o.src))try{o.parentNode.removeChild(o),console.log(\"拦截可疑静态脚本:\",o.src)}catch(e){console.warn(e)}}})}).observe(document,{subtree:!0,childList:!0})},notxss:{keywords:[],withelist:[],blacks:[]}},\"object\"!==o(e)||\"object\"!==o(e.exports))throw new Error(\"current environment do not support niepan\");e.exports=s,i?i.niepan=s:void 0===(n=function(){return s}.apply(t,[]))||(e.exports=n)}}(window||void 0)}).call(this,n(\"ouh7\")(e))},tjUo:function(e,t,n){\"use strict\";var o=n(\"+Kph\");console.log(o);var i=n(\"B2MJ\");console.log(i);var r=i();console.log(r),r.sub(\"xx\",function(){console.log(\"pub...\")}),r.pub(\"xx\"),r.pub(\"xx\"),r.sub(\"yy\",function(){console.log(\"pub...\")},!0),r.pub(\"yy\"),r.pub(\"yy\"),r.request({url:\"http://localhost:8888\",success:function(e){console.log(e)}});var s=i(document.getElementById(\"li1\"));console.log(s),s.sub(\"click\",function(){console.log(\"clicked li1,this event could be pubed all the time\")});var l=i(document.body);console.log(l),l.sub(\"click\",function(){console.log(\"clicked body,this event would be pubed only one time\")},!0);var a=i(document.getElementById(\"li3\"));console.log(a.$data.age);var c=i(document.getElementById(\"input1\"));c.sub(\"input\",function(e){console.log(c.$data.name)})}},[[\"tjUo\",0,1]]]);","extractedComments":[]}